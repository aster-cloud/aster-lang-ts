{"id":"train-001","english_description":"Prepend a bracketed tag in front of a log message.","cnl_code":"Module ai.generated.case7.\n\nRule taggedMessage given tag as Text, body as Text, produce Text:\n  Let bracket be Text.concat(\"[\", tag).\n  Let label be Text.concat(bracket, \"] \").\n  Return Text.concat(label, body).","category":"basic","tags":["text","formatting"],"difficulty":"easy"}
{"id":"train-002","english_description":"Choose a fulfillment warehouse based on region, amount, and expedited flag.","cnl_code":"Module ai.generated.case33.\n\nDefine Order has region as Text, amount as Int, expedited as Bool.\n\nDefine RouteDecision has warehouse as Text, expedite as Bool.\n\nRule chooseRoute given order as Order, produce RouteDecision:\n  If order.expedited,:\n    Return RouteDecision with warehouse set to \"EXPRESS\", expedite set to true.\n  If Text.equals(order.region, \"EU\"),:\n    Return RouteDecision with warehouse set to \"BERLIN\", expedite set to false.\n  If Text.equals(order.region, \"APAC\"),:\n    Return RouteDecision with warehouse set to \"SINGAPORE\", expedite set to false.\n  If order.amount greater than 10000,:\n    Return RouteDecision with warehouse set to \"CENTRAL\", expedite set to false.\n  Return RouteDecision with warehouse set to \"LOCAL\", expedite set to false.","category":"complex","tags":["routing","orders"],"difficulty":"medium"}
{"id":"train-003","english_description":"Evaluate loan applications by checking age, credit score, and computing rate ladders.","cnl_code":"Module aster.finance.loan.\n\nDefine LoanApplication has applicantId, amount, termMonths, purpose.\n\nDefine ApplicantProfile has age, creditScore, annualIncome, monthlyDebt, yearsEmployed.\n\nDefine LoanDecision has approved, reason, approvedAmount, interestRate, termMonths.\n\nRule evaluateLoanEligibility given application, applicant, produce:\n  Return 0.\nRule determineInterestRate given creditScore, produce:\n  Return 0.","category":"complex","tags":["finance","loan"],"difficulty":"medium"}
{"id":"train-004","english_description":"Import another module and call its IO function to relay the fetched data.","cnl_code":"Module tests.effects.module_b.\n\nUse tests.effects.module_a as A.\n\nRule load_data, produce. It performs io:\n  Return A.fetch_data().","category":"effects","tags":["module","http"],"difficulty":"easy"}
{"id":"train-005","english_description":"Build a general-purpose business rules engine with condition evaluation and actions.","cnl_code":"Module test.cnl.programs.business.rules_engine.\n\nRule main, produce:\n  Return 0.","category":"complex","tags":["rules","engine"],"difficulty":"hard"}
{"id":"train-006","english_description":"Return text from a function that promises an integer to demonstrate a return type mismatch.","cnl_code":"Module tests.typecheck.mismatch.return.\n\nRule returnMismatch, produce:\n  Return \"invalid\".","category":"validation","tags":["functions","type_error"],"difficulty":"easy"}
{"id":"train-007","english_description":"Exercise effect inference across multiple helper layers to ensure capabilities are propagated.","cnl_code":"Module demo.eff_infer_transitive.\n\nRule leafIO, produce. It performs io:\n  Return Http.get(\"https://example.com\").\n\nRule middleCPU, produce. It performs cpu:\n  Return leafIO().\n\nRule rootIO, produce. It performs io:\n  Return middleCPU().","category":"effects","tags":["inference","transitive"],"difficulty":"medium"}
{"id":"train-008","english_description":"Handle simple insurance checks by toggling coverage fields based on a patient record.","cnl_code":"Module test.eligibility.struct.\n\nDefine Patient has patientId, age, hasInsurance, insuranceType, chronicConditions.\n\nDefine Service has serviceCode, serviceName, basePrice, requiresPreAuth.\n\nDefine EligibilityCheck has eligible, reason, coveragePercent, estimatedCost, requiresPreAuth.\n\nRule calculatePatientCost given basePrice, coveragePercent, produce:\n  Let patientPercent be 100 minus coveragePercent.\n  Let patientCost be basePrice times patientPercent.\n  Return patientCost.\n\nRule checkServiceEligibility given patient, service, produce:\n  Return EligibilityCheck with eligible set to true, reason set to \"Has insurance\", coveragePercent set to 80, estimatedCost set to calculatePatientCost(service.basePrice, 80), requiresPreAuth set to service.requiresPreAuth.","category":"complex","tags":["eligibility","records"],"difficulty":"medium"}
{"id":"train-009","english_description":"Rotate a client secret and immediately call an HTTP endpoint to refresh access.","cnl_code":"Module ai.generated.case26.\n\nRule refreshAccessToken given clientId as Text, produce Text. It performs io [Secrets, Http]:\n  Let rotated be Secrets.rotate(clientId).\n  Let payload be Text.concat(\"token=\", rotated).\n  Return Http.post(\"/oauth/refresh\", payload).","category":"effects","tags":["secrets","http"],"difficulty":"medium"}
{"id":"train-010","english_description":"Show a workflow step that uses a secrets capability without declaring it.","cnl_code":"Module tests.workflow.undeclared_capability.\n\nRule undeclaredCapWorkflow, produce. It performs io [Sql]:\n  \n  workflow:\n    step rotate:\n      Return ok of Secrets.rotate(\"token\").\n  \n  .","category":"effects","tags":["workflow","capability"],"difficulty":"medium"}
{"id":"train-011","english_description":"Wait twice on the same async handle to trigger duplicate wait diagnostics.","cnl_code":"Module tests.typecheck.async.duplicate_wait.\n\nRule processUser given userId, produce:\n  Start profile as async ProfileSvc.load(userId).\n  Wait for profile.\n  Wait for profile.\n  Return \"done\".","category":"effects","tags":["async","concurrency"],"difficulty":"medium"}
{"id":"train-012","english_description":"Trigger diagnostics by writing to SQL from a function that never requested that capability.","cnl_code":"Module test.eff.violation.missing_sql.\n\nRule query_user, produce. It performs io [Http]:\n  Return Db.query(\"SELECT * FROM users\").","category":"effects","tags":["violation","sql"],"difficulty":"medium"}
{"id":"train-013","english_description":"Forget to include HTTP in the declared capability list while issuing network calls.","cnl_code":"Module test.eff.violation.missing_http.\n\nRule api_call, produce. It performs io [Sql]:\n  Return Http.get(\"/health\").","category":"effects","tags":["violation","http"],"difficulty":"medium"}
{"id":"train-014","english_description":"Accept only a short allowlist of country codes.","cnl_code":"Module ai.generated.case17.\n\nRule isAllowedCountry given code as Text, produce Bool:\n  If Text.equals(code, \"US\"),:\n    Return true.\n  If Text.equals(code, \"NZ\"),:\n    Return true.\n  If Text.equals(code, \"AU\"),:\n    Return true.\n  Return false.","category":"validation","tags":["allowlist","text"],"difficulty":"easy"}
{"id":"train-015","english_description":"Model a full eligibility flow with multiple data types and helper functions for minors and seniors.","cnl_code":"Module test.eligibility.full.\n\nDefine Patient has patientId, age, hasInsurance, insuranceType, chronicConditions.\n\nDefine Service has serviceCode, serviceName, basePrice, requiresPreAuth.\n\nDefine EligibilityCheck has eligible, reason, coveragePercent, estimatedCost, requiresPreAuth.\n\nRule determineMinorCoverage given insuranceType, service, produce:\n  Return 0.\nRule calculatePatientCost given basePrice, coveragePercent, produce:\n  Return 0.\nRule checkServiceEligibility given patient, service, produce:\n  Return 0.","category":"complex","tags":["eligibility","healthcare"],"difficulty":"hard"}
{"id":"train-016","english_description":"Demonstrate acceptable workflow retry settings using exponential backoff.","cnl_code":"Module tests.typecheck.workflow.retry_exponential.\n\nRule retryExponential, produce. It performs io:\n  \n  workflow:\n    step only:\n      Return ok of \"ok\".\n  \n    retry:\n      max attempts: 3.\n      backoff: exponential.\n  \n  .","category":"effects","tags":["workflow","retry"],"difficulty":"medium"}
{"id":"train-017","english_description":"Call Time.now and HTTP ping to build a timestamped heartbeat.","cnl_code":"Module ai.generated.case23.\n\nRule timestampedPing, produce Text. It performs io [Time, Http]:\n  Let ts be Time.now().\n  Let resp be Http.get(\"/ping\").\n  Let prefix be Text.concat(ts, \": \").\n  Return Text.concat(prefix, resp).","category":"effects","tags":["time","http"],"difficulty":"easy"}
{"id":"train-018","english_description":"Aggregate several capability mistakes inside one function to produce multiple diagnostics.","cnl_code":"Module test.eff.violation.multiple_errors.\n\nRule bad_func, produce. It performs io [Http]:\n  Let secret be Secrets.get(\"KEY\").\n  Let data be Db.query(\"SELECT 1\").\n  Let ts be Time.now().\n  Return Http.post(\"/api\", data).","category":"effects","tags":["violation","multi_error"],"difficulty":"hard"}
{"id":"train-019","english_description":"Insert an audit row into SQL and notify an HTTP endpoint.","cnl_code":"Module ai.generated.case19.\n\nRule logAudit given event as Text, produce Text. It performs io [Sql, Http]:\n  Let saved be Sql.insert(\"audit_log\", event).\n  Return Http.post(\"/notify\", saved).","category":"effects","tags":["sql","http","audit"],"difficulty":"medium"}
{"id":"train-020","english_description":"Propagate tagged user data into an HTTP POST to demonstrate privacy violations.","cnl_code":"Module test.pii.propagation.\n\nRule process_user given name, produce. It performs io [Http]:\n  Let user_name be name.\n  Return Http.post(\"/api/users\", user_name).","category":"security","tags":["pii","http"],"difficulty":"medium"}
{"id":"train-021","english_description":"Call SQL APIs from a function that only requested HTTP to show capability drift.","cnl_code":"Module test.eff.violation.http_calls_sql.\n\nRule fetch_data, produce. It performs io [Http]:\n  Return Sql.query(\"SELECT * FROM users\").","category":"effects","tags":["violation","http","sql"],"difficulty":"medium"}
{"id":"train-022","english_description":"Illustrate a workflow whose retry policy conflicts with an overly small timeout.","cnl_code":"Module tests.typecheck.workflow.retry_timeout.\n\nRule retryTimeoutConflict, produce. It performs io:\n  \n  workflow:\n    step only:\n      Return ok of \"ok\".\n  \n    retry:\n      max attempts: 5.\n      backoff: linear.\n  \n    timeout: 3 seconds.\n  \n  .","category":"validation","tags":["workflow","retry","timeout"],"difficulty":"medium"}
{"id":"train-023","english_description":"Use the Secrets capability without declaring it inside a file-only handler.","cnl_code":"Module test.eff.violation.files_calls_secrets.\n\nRule write_log, produce. It performs io [Files]:\n  Let key be Secrets.get(\"API_KEY\").\n  Return Files.write(\"/tmp/log.txt\", key).","category":"effects","tags":["violation","files","secrets"],"difficulty":"medium"}
{"id":"train-024","english_description":"Fetch from HTTP and fall back to a default endpoint if the body is empty.","cnl_code":"Module ai.generated.case20.\n\nRule fetchWithFallback given url as Text, produce Text. It performs io [Http]:\n  Let primary be Http.get(url).\n  If Text.equals(primary, \"\"),:\n    Return Http.get(\"/fallback\").\n  Return primary.","category":"effects","tags":["http","fallback"],"difficulty":"easy"}
{"id":"train-025","english_description":"Aggregate total and count from a list of integers using recursion.","cnl_code":"Module ai.generated.case35.\n\nDefine Metrics has total as Int, count as Int.\n\nRule aggregateMetrics given values as List of Int, produce Metrics:\n  If List.isEmpty(values),:\n    Return Metrics with total set to 0, count set to 0.\n  Let head be List.head(values).\n  Let tail be List.tail(values).\n  Let rest be aggregateMetrics(tail).\n  Let newTotal be head plus rest.total.\n  Let newCount be 1 plus rest.count.\n  Return Metrics with total set to newTotal, count set to newCount.","category":"complex","tags":["recursion","aggregation"],"difficulty":"hard"}
{"id":"train-026","english_description":"Mask an SSN-tagged field by returning a fixed placeholder.","cnl_code":"Module ai.generated.case27.\n\nRule maskSsn given value as @pii(L3, ssn) Text, produce Text:\n  Return \"****-****\".","category":"security","tags":["pii","masking"],"difficulty":"easy"}
{"id":"train-027","english_description":"Configure a workflow with an excessive retry limit and linear backoff.","cnl_code":"Module tests.typecheck.workflow.retry_many.\n\nRule retryManyTimes, produce. It performs io:\n  \n  workflow:\n    step only:\n      Return ok of \"ok\".\n  \n    retry:\n      max attempts: 20.\n      backoff: linear.\n  \n  .","category":"validation","tags":["workflow","retry"],"difficulty":"medium"}
{"id":"train-028","english_description":"Define a workflow that performs IO but forgets to declare the effect capability.","cnl_code":"Module tests.workflow.missing_io_effect.\n\nRule orchestrate, produce:\n  \n  workflow:\n    step fetch:\n      Return ok of \"done\".\n  \n  .","category":"effects","tags":["workflow","io"],"difficulty":"medium"}
{"id":"train-029","english_description":"Check that a start timestamp never falls after its end timestamp.","cnl_code":"Module ai.generated.case16.\n\nRule hasValidWindow given startTs as Int, endTs as Int, produce Bool:\n  If startTs greater than endTs,:\n    Return false.\n  Return true.","category":"validation","tags":["time","ordering"],"difficulty":"easy"}
{"id":"train-030","english_description":"Launch async profile and timeline fetches, wait for both, and return a combined dashboard.","cnl_code":"Define User has id, name.\n\nDefine Dash has profile, timeline.\n\nDefine AuthErr as one of InvalidCreds, Locked.\n\nRule fetchDashboard given u, produce. It performs io:\n  Start profile as async ProfileSvc.load(u.id).\n  Start timeline as async FeedSvc.timeline(u.id).\n  Wait for profile and timeline.\n  Return ok of Dash(profile, timeline).","category":"effects","tags":["async","result"],"difficulty":"medium"}
{"id":"train-031","english_description":"Demonstrate nested helpers where a deeper call uses extra capabilities the root never declared.","cnl_code":"Module test.eff.violation.nested_a.\n\nRule inner_io, produce. It performs io [Http]:\n  Return Http.get(\"/ping\").\n\nRule middle_cpu, produce. It performs cpu:\n  Return inner_io().\n\nRule outer_pure, produce:\n  Return middle_cpu().","category":"effects","tags":["violation","nesting"],"difficulty":"medium"}
{"id":"train-032","english_description":"Demonstrate capability alias imports by renaming HTTP, database, and time modules while issuing calls through both names.","cnl_code":"Module test.eff.alias_import.\n\nUse Http as H.\n\nUse Db as D.\n\nUse Time as T.\n\nRule fetch_with_alias, produce:\n  Return H.get(\"/api/data\").\n\nRule query_with_alias, produce:\n  Return D.query(\"SELECT * FROM users\").\n\nRule time_alias_test, produce:\n  Return T.format(\"2024-01-01\").\n\nRule mixed_alias_and_direct, produce:\n  Return Http.get(\"/direct\").\n\nRule declared_effect_with_alias, produce. It performs io:\n  Return H.get(\"/api/data\").","category":"effects","tags":["effects","alias","capability"],"difficulty":"medium"}
{"id":"train-033","english_description":"Model a multi-step workflow with retries, compensations, and timeout policies.","cnl_code":"Module tests.workflow.linear.\n\nRule runWorkflow, produce. It performs io:\n  \n  workflow:\n    step fetch:\n      Return ok of Http.get(\"/orders\").\n    compensate:\n      Return ok of Secrets.rotate(\"orders-key\").\n\n    step persist:\n      Let record be Sql.insert(\"orders\", \"payload\").\n      Return ok of record.\n    compensate:\n      Return ok of Secrets.rotate(\"orders-key\").\n\n    retry:\n      max attempts: 3.\n      backoff: exponential.\n\n    timeout: 30 seconds.\n  \n  .","category":"complex","tags":["workflow","retry","timeout"],"difficulty":"hard"}
{"id":"train-034","english_description":"Offer simple CLI helpers for greeting users, adding punctuation, and measuring text length.","cnl_code":"Module demo.cli.\n\nRule greet given name, produce:\n  Return Text.concat(\"Hello, \", name).\n\nRule exclaim given s, produce:\n  Return Text.concat(s, \"!\").\n\nRule length given s, produce:\n  Return Text.length(s).","category":"basic","tags":["interop","text"],"difficulty":"easy"}
{"id":"train-035","english_description":"Call an HTTP function without granting IO capabilities to highlight effect enforcement.","cnl_code":"Module tests.typecheck.effects.io.\n\nRule fetchUser, produce:\n  Return Http.get(\"/user\").","category":"effects","tags":["effects","http"],"difficulty":"easy"}
{"id":"train-036","english_description":"Show a helper that adds two integers and returns their sum.","cnl_code":"Module tests.typecheck.basic.\n\nRule add given x, y, produce:\n  Return x plus y.","category":"basic","tags":["basic_types","arithmetic"],"difficulty":"easy"}
{"id":"train-037","english_description":"Fetch data over HTTP inside a simple helper module.","cnl_code":"Module tests.effects.module_a.\n\nRule fetch_data, produce. It performs io:\n  Return Http.get(\"/external\").","category":"effects","tags":["module","http"],"difficulty":"easy"}
{"id":"train-038","english_description":"Reject orders whose amount exceeds a provided limit.","cnl_code":"Module ai.generated.case15.\n\nRule isWithinLimit given amount as Int, limit as Int, produce Bool:\n  If amount greater than limit,:\n    Return false.\n  Return true.","category":"validation","tags":["limits","orders"],"difficulty":"easy"}
{"id":"train-039","english_description":"Enforce explicit Secrets declarations when parsing capability brackets.","cnl_code":"Module demo.capcaps.missing_secrets.\n\nRule badSec, produce. It performs io [Files]:\n  Return Secrets.get(\"API_KEY\").","category":"effects","tags":["capability","enforcement"],"difficulty":"medium"}
{"id":"train-040","english_description":"Capture effectful functions inside a lambda and reuse them to fetch HTTP data.","cnl_code":"Module tests.lambda_effects.\n\nRule fetch_data given url, produce. It performs io:\n  Return io.get(url).\n\nRule process_with_lambda, produce. It performs io:\n  Let fetcher be function with endpoint, produce:\n    Return io.get(endpoint).\n  Return fetcher(\"/api/data\").","category":"effects","tags":["lambda","http"],"difficulty":"medium"}
{"id":"train-041","english_description":"Illustrate a list literal that mixes integers and text, triggering a type mismatch.","cnl_code":"Module tests.typecheck.list.\n\nRule numbers, produce:\n  Return Int.add(List.head([1, \"two\"]), 1).","category":"validation","tags":["list","type_error"],"difficulty":"easy"}
{"id":"train-042","english_description":"Use an effect-polymorphic identity helper to show capability variables in action.","cnl_code":"Module test.effect_var.\n\nRule identity given x, produce:\n  Return x.\n\nRule caller, produce. It performs io:\n  Let input be IO.readLine().\n  Return identity(input).","category":"effects","tags":["effects","polymorphism"],"difficulty":"medium"}
{"id":"train-043","english_description":"Start two async calls (profile and timeline) and concatenate their results.","cnl_code":"Module ai.generated.case21.\n\nRule fetchProfilePage given userId as Text, produce Text. It performs io:\n  Start profile as async ProfileSvc.load(userId).\n  Start timeline as async FeedSvc.timeline(userId).\n  Wait for profile and timeline.\n  Return Text.concat(profile, timeline).","category":"effects","tags":["async","http"],"difficulty":"medium"}
{"id":"train-044","english_description":"Highlight a workflow whose compensation block introduces a new capability not declared up front.","cnl_code":"Module tests.workflow.compensate_capability.\n\nRule compensateAddsCapability, produce. It performs io [Http, Secrets]:\n  \n  workflow:\n    step fetch:\n      Return ok of Http.get(\"/orders\").\n    compensate:\n      Return ok of Secrets.rotate(\"orders-key\").\n  \n  .","category":"effects","tags":["workflow","capability"],"difficulty":"medium"}
{"id":"train-045","english_description":"Start an asynchronous task without awaiting the result to demonstrate async validation.","cnl_code":"Module tests.typecheck.async.start.\n\nRule launchTask given userId, produce:\n  Start profile as async ProfileSvc.load(userId).\n  Return \"queued\".","category":"effects","tags":["async","workflow"],"difficulty":"medium"}
{"id":"train-046","english_description":"Show a workflow whose timeout is shorter than supported to trigger validation errors.","cnl_code":"Module tests.typecheck.workflow.timeout_short.\n\nRule quickTimeout, produce. It performs io:\n  \n  workflow:\n    step only:\n      Return ok of \"ok\".\n  \n    timeout: 1 seconds.\n  \n  .","category":"validation","tags":["workflow","timeout"],"difficulty":"easy"}
{"id":"train-047","english_description":"Show a workflow whose steps return inconsistent result variants, leading to a type error.","cnl_code":"Module tests.workflow.type_error.\n\nRule brokenWorkflow, produce. It performs io:\n  \n  workflow:\n    step danger:\n      Return err of \"boom\".\n    compensate:\n      Return ok of \"still wrong\".\n  \n  .","category":"validation","tags":["workflow","result"],"difficulty":"medium"}
{"id":"train-048","english_description":"Ensure a required text field is not empty.","cnl_code":"Module ai.generated.case14.\n\nRule hasName given value as Text, produce Bool:\n  If Text.equals(value, \"\"),:\n    Return false.\n  Return true.","category":"validation","tags":["text","required"],"difficulty":"easy"}
{"id":"train-049","english_description":"Highlight transitive capability leaks where a helper delegates to another module that uses extra effects.","cnl_code":"Module test.eff.violation.transitive.\n\nRule top_http, produce. It performs io [Http]:\n  Return Secrets.get(\"DB_PASSWORD\").","category":"effects","tags":["violation","transitive"],"difficulty":"medium"}
{"id":"train-050","english_description":"Store plain text email data to illustrate a safe path that carries no PII tags.","cnl_code":"Module test.pii.http_safe.\n\nRule store_email given email, produce:\n  Return email.","category":"security","tags":["pii","safe_path"],"difficulty":"easy"}
{"id":"train-051","english_description":"Format SSNs and upload the string through nested helpers to surface data lineage.","cnl_code":"Module test.pii.nested_call.\n\nRule format_user given ssn, produce:\n  Return \"SSN: \" plus ssn.\n\nRule upload_data given data, produce. It performs io [Http]:\n  Return Http.post(\"/upload\", data).\n\nRule process_ssn given ssn, produce. It performs io [Http]:\n  Let formatted be format_user(ssn).\n  Return upload_data(formatted).","category":"security","tags":["pii","http","nesting"],"difficulty":"medium"}
{"id":"train-052","english_description":"Subtract a fixed discount from a price but never go below zero.","cnl_code":"Module ai.generated.case5.\n\nRule applyDiscount given price as Int, discount as Int, produce Int:\n  Let result be price minus discount.\n  If result less than 0,:\n    Return 0.\n  Return result.","category":"basic","tags":["pricing","arithmetic"],"difficulty":"easy"}
{"id":"train-053","english_description":"Attempt to wait on an async handle that was never started.","cnl_code":"Module tests.typecheck.async.wait_not_started.\n\nRule fetchData given userId, produce:\n  Wait for profile.\n  Return \"done\".","category":"effects","tags":["async","concurrency"],"difficulty":"easy"}
{"id":"train-054","english_description":"Validate that a credit score stays within the 300-850 range.","cnl_code":"Module ai.generated.case13.\n\nRule isScoreValid given score as Int, produce Bool:\n  If score less than 300,:\n    Return false.\n  If score greater than 850,:\n    Return false.\n  Return true.","category":"validation","tags":["range","score"],"difficulty":"easy"}
{"id":"train-055","english_description":"Return structured eligibility decisions depending on age, showcasing record construction.","cnl_code":"Module test.complex.return.\n\nDefine Patient has insuranceType, age.\n\nDefine Service has basePrice, requiresPreAuth.\n\nDefine EligibilityCheck has eligible, reason, coveragePercent, estimatedCost, requiresPreAuth.\n\nRule determineMinorCoverage given insuranceType, service, produce:\n  Return 0.\nRule calculatePatientCost given basePrice, coveragePercent, produce:\n  Return 0.\nRule checkServiceEligibility given patient, service, produce:\n  Return 0.","category":"complex","tags":["eligibility","records"],"difficulty":"medium"}
{"id":"train-056","english_description":"Launch two async operations bound to the same handle to show duplicate start errors.","cnl_code":"Module tests.typecheck.async.duplicate_start.\n\nRule launchTwice given userId, produce:\n  Start profile as async ProfileSvc.load(userId).\n  Start profile as async ProfileSvc.reload(userId).\n  Wait for profile.\n  Return \"done\".","category":"effects","tags":["async","concurrency"],"difficulty":"medium"}
{"id":"train-057","english_description":"Set a workflow timeout that far exceeds the allowed maximum to produce diagnostics.","cnl_code":"Module tests.typecheck.workflow.timeout_long.\n\nRule longTimeout, produce. It performs io:\n  \n  workflow:\n    step only:\n      Return ok of \"ok\".\n  \n    timeout: 7200 seconds.\n  \n  .","category":"validation","tags":["workflow","timeout"],"difficulty":"easy"}
{"id":"train-058","english_description":"Only send PII over HTTP when flagged as non-sensitive, otherwise block it.","cnl_code":"Module ai.generated.case30.\n\nRule maybeSendEmail given isSensitive as Bool, email as @pii(L2, email) Text, produce Text. It performs io [Http]:\n  If isSensitive,:\n    Return \"blocked\".\n  Return Http.post(\"/mail/send\", email).","category":"security","tags":["pii","http","policy"],"difficulty":"medium"}
{"id":"train-059","english_description":"Join keywords into a comma separated line, falling back to an empty string.","cnl_code":"Module ai.generated.case10.\n\nRule keywordsLine given keywords as List of Text, produce Text:\n  If List.isEmpty(keywords),:\n    Return \"\".\n  Return Text.join(\",\", keywords).","category":"basic","tags":["text","list"],"difficulty":"easy"}
{"id":"train-060","english_description":"Illustrate a CPU-only declaration that still reaches out to IO, triggering enforcement errors.","cnl_code":"Module test.eff.violation.cpu_calls_io.\n\nRule fetch_data, produce. It performs io [Http]:\n  Return Http.get(\"/api/data\").\n\nRule process, produce. It performs cpu:\n  Return fetch_data().","category":"effects","tags":["violation","cpu","io"],"difficulty":"medium"}
{"id":"train-061","english_description":"Build nested lambdas that concatenate strings and compare integers.","cnl_code":"Module demo.lambdamixed.\n\nRule demo given pfx, produce:\n  Let f be function with x, produce:\n    Return Text.concat(pfx, x).\n  Let g be function with y, produce:\n    Return Text.concat(\"2\", y).\n  Return Text.concat(f(\"\"), g(\"b\")).\n\nRule compare given x, y, produce:\n  Return cmp(x, y).","category":"basic","tags":["lambda","text","comparison"],"difficulty":"medium"}
{"id":"train-062","english_description":"Pattern match over an enum without covering every variant to highlight exhaustiveness.","cnl_code":"Define AuthErr as one of InvalidCreds, Locked.\n\nRule show given e, produce:\n  Match e:\n    When InvalidCreds, Return \"bad\".","category":"validation","tags":["pattern_matching","enum"],"difficulty":"easy"}
{"id":"train-063","english_description":"Use the Inventory capability without IO permissions to trigger an error.","cnl_code":"Module test.typechecker.inventory_missing_io.\n\n// Invalid Inventory capability usage - missing IO effect declaration\n// Should produce error: Inventory capability requires IO effect\n\nRule reserveInventoryInvalid given orderId, produce:\n  Return ok of Inventory.reserve(orderId, List.empty()).","category":"effects","tags":["capability","inventory"],"difficulty":"easy"}
{"id":"train-064","english_description":"Define a workflow that reserves an order in SQL then notifies an HTTP endpoint.","cnl_code":"Module ai.generated.case25.\n\nRule approveOrderWorkflow given orderId as Text, produce Workflow of Result of Text and Text and IO. It performs io [Http, Sql]:\n  \n  workflow:\n    step reserve:\n      Let record be Sql.insert(\"orders\", orderId).\n      Return ok of record.\n    compensate:\n      Return err of \"reserve_failed\".\n\n    step confirm:\n      Return ok of Http.post(\"/orders/confirm\", orderId).\n\n    retry:\n      max attempts: 2.\n      backoff: linear.\n\n    timeout: 60 seconds.\n  \n  .","category":"effects","tags":["workflow","http","sql"],"difficulty":"hard"}
{"id":"train-065","english_description":"Reserve and release inventory with the correct capability declarations.","cnl_code":"Module test.typechecker.inventory_success.\n\n// Valid Inventory capability usage - should produce no errors\n\nRule reserveInventoryValid given orderId, produce. It performs io [Inventory]:\n  Return ok of Inventory.reserve(orderId, List.empty()).\n\nRule releaseInventoryValid given reservationId, produce. It performs io [Inventory]:\n  Return ok of Inventory.release(reservationId).","category":"effects","tags":["capability","inventory"],"difficulty":"easy"}
{"id":"train-066","english_description":"Map a numeric score into gold, silver, bronze, or basic tiers.","cnl_code":"Module ai.generated.case8.\n\nRule chooseTier given score as Int, produce Text:\n  If score at least 90,:\n    Return \"gold\".\n  If score at least 75,:\n    Return \"silver\".\n  If score at least 60,:\n    Return \"bronze\".\n  Return \"basic\".","category":"basic","tags":["branching","scoring"],"difficulty":"easy"}
{"id":"train-067","english_description":"Sum preparation, task, and cleanup durations into a total.","cnl_code":"Module ai.generated.case6.\n\nRule totalDuration given prep as Int, task as Int, cleanup as Int, produce Int:\n  Let partial be prep plus task.\n  Return partial plus cleanup.","category":"basic","tags":["arithmetic","time"],"difficulty":"easy"}
{"id":"train-068","english_description":"Call time utilities without listing the Time capability.","cnl_code":"Module test.eff.violation.missing_time.\n\nRule log_event, produce. It performs io [Files]:\n  Let timestamp be Time.now().\n  Return File.write(\"/var/log/app.log\", timestamp).","category":"effects","tags":["violation","time"],"difficulty":"medium"}
{"id":"train-069","english_description":"Upload a report over HTTP and return Result-based errors for forbidden or timeout responses.","cnl_code":"Module ai.generated.case24.\n\nDefine UploadErr as one of Timeout or Forbidden.\n\nRule uploadReport given body as Text, produce Result of Text and UploadErr. It performs io [Http]:\n  Let resp be Http.post(\"/reports\", body).\n  If Text.equals(resp, \"timeout\"),:\n    Return err of Timeout.\n  If Text.equals(resp, \"403\"),:\n    Return err of Forbidden.\n  Return ok of resp.","category":"effects","tags":["http","result"],"difficulty":"medium"}
{"id":"train-070","english_description":"Hash a PII identifier using the CPU capability before storage.","cnl_code":"Module ai.generated.case31.\n\nRule hashIdentifier given value as @pii(L2, id) Text, produce Text. It performs io [Cpu]:\n  Return Cpu.hash(value).","category":"security","tags":["pii","cpu"],"difficulty":"medium"}
