# Aster Lang æµ‹è¯•è´¡çŒ®æŒ‡å—

> æ›´æ–°æ—¶é—´ï¼š2025-10-22 22:04 NZSTï¼ˆæ‰§è¡Œè€…ï¼šCodexï¼‰

æœ¬æŒ‡å—é¢å‘é¦–æ¬¡å‘ Aster Lang è´¡çŒ®æµ‹è¯•çš„å¼€å‘è€…ï¼Œå¸®åŠ©ä½ åœ¨ 5 åˆ†é’Ÿå†…æ‰¾åˆ°å…¥å£ã€åœ¨ 1 å°æ—¶å†…äº¤ä»˜é«˜è´¨é‡æµ‹è¯•ç”¨ä¾‹ã€‚è¯·åœ¨æäº¤ä»»ä½• PR å‰å®Œæ•´é˜…è¯»æœ¬æ–‡ä»¶ã€‚

## æŒ‡å—ç›®æ ‡

- é˜æ˜ç¡®è®¤æµ‹è¯•èŒƒå›´ã€é€‰æ‹©æµ‹è¯•ç±»å‹ã€ç¼–å†™ä¸è°ƒè¯•çš„æ ‡å‡†æµç¨‹ã€‚
- æä¾›å¯ç›´æ¥å¤åˆ¶çš„ä»£ç æ¨¡æ¿ä¸å¸¸ç”¨å‘½ä»¤ï¼Œé™ä½ä¸Šæ‰‹æˆæœ¬ã€‚
- è¯´æ˜ä¸é»„é‡‘ï¼ˆGoldenï¼‰æ•°æ®ã€å›å½’æµ‹è¯• TODO çš„ç»´æŠ¤è¦æ±‚ï¼Œé¿å…ç ´åæ—¢æœ‰åŸºçº¿ã€‚
- å¼ºè°ƒæµ‹è¯•é‡‘å­—å¡”ç›®æ ‡ï¼ˆå•å…ƒ 70% / é›†æˆ 20% / E2E 10%ï¼‰ï¼Œç¡®ä¿æ–°å¢ç”¨ä¾‹å¯¹å‡†è–„å¼±å±‚çº§ã€‚

## é€‚ç”¨å¯¹è±¡

- æ–°åŠ å…¥ Aster Lang ç¼–è¯‘å™¨å¼€å‘çš„è´¡çŒ®è€…ã€‚
- è®¡åˆ’æ‰©å±•è¯­è¨€ç‰¹æ€§çš„æ ¸å¿ƒæˆå‘˜ï¼Œéœ€è¦è¡¥å……è¦†ç›–é¢ã€‚
- ä¸º CLIã€è¿è¡Œæ—¶æˆ– IDE é›†æˆä¿®å¤ç¼ºé™·çš„ç»´æŠ¤è€…ã€‚

## å‡†å¤‡å·¥ä½œ

1. é˜…è¯» `test/README.md` è·å–æµ‹è¯•ç›®å½•å…¨å±€ç»“æ„ã€‚
2. å¤ä¹ æœ€æ–°çš„æµ‹è¯•ç»Ÿè®¡ä¸å†å²è®°å½•ï¼š`docs/testing.md`ã€‚
3. å¦‚éœ€äº†è§£å½“å‰å›å½’ç”¨ä¾‹çŠ¶æ€ï¼Œè¯·å‚è€ƒ `.claude/phase5.3-test-failures-analysis.md`ã€‚
4. è¿è¡Œæœ€å°éªŒè¯å‘½ä»¤ï¼Œç¡®ä¿æœ¬åœ°ç¯å¢ƒå¯æ‰§è¡Œï¼š
   ```bash
   npm install
   npm run build
   npm run test -- --watch=false
   ```
5. è‹¥æ¶‰åŠ CLI æˆ– Java ä¾§æµ‹è¯•ï¼Œè¯·åŒæ­¥å®‰è£…å¯¹åº”å·¥å…·é“¾ï¼ˆè¯¦è§ `docs/SETUP.md`ï¼‰ã€‚

---

## æµ‹è¯•ç±»å‹é€‰æ‹©å†³ç­–æ ‘

```
+------------------------------------------+
| åŠŸèƒ½æ˜¯å¦ä»…æ¶‰åŠçº¯å‡½æ•°/æ— å¤–éƒ¨ä¾èµ–ï¼Ÿ         |
+----------------------+-------------------+
                       |
                       | æ˜¯ â†’ é€‰æ‹© å•å…ƒæµ‹è¯•ï¼ˆtest/unitï¼‰
                       v
å¦
|
|-- æ¶‰åŠå¤šä¸ª Aster æ¨¡å—äº¤äº’ï¼Ÿ
|      |-- æ˜¯ â†’ é›†æˆæµ‹è¯•ï¼ˆtest/integrationï¼‰
|      v
|-- éœ€è¦æ¨¡æ‹Ÿ CLI / è¿è¡Œè„šæœ¬ï¼Ÿ
|      |-- æ˜¯ â†’ ç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆtest/e2eï¼‰
|      v
|-- åŸºçº¿ JSON/æ–‡æœ¬è¾“å‡ºéœ€è¦é”å®šï¼Ÿ
|      |-- æ˜¯ â†’ é»„é‡‘æµ‹è¯•ï¼Œå¤ç”¨ e2e golden æœºåˆ¶
|      v
|-- é’ˆå¯¹ç‰¹å®šç¼ºé™·å›å½’ï¼Ÿ
|      |-- æ˜¯ â†’ å›å½’æµ‹è¯•ï¼ˆtest/regressionï¼‰
|      v
|-- éšæœºè¾“å…¥æˆ–å±æ€§ä¸å˜é‡ï¼Ÿ
|      |-- æ˜¯ â†’ å±æ€§æµ‹è¯•ï¼ˆtest/propertyï¼‰
|      v
|-- éœ€è¦ fuzz æ•°æ®æˆ–æ€§èƒ½å¯¹æ¯”ï¼Ÿ
         |-- fuzz â†’ test/fuzz
         |-- perf â†’ test/perf
```

> æç¤ºï¼šè‹¥ä»ç„¶çŠ¹è±«ï¼Œè¯·æäº¤ issue å¹¶ @ ä¸» AI å†³ç­–ï¼›æ‰§è¡Œ AI ä¸è´Ÿè´£æœ€ç»ˆæ‹æ¿ã€‚

---

## å„æµ‹è¯•ç±»å‹å¿«é€Ÿå‚è€ƒ

### å•å…ƒæµ‹è¯•ï¼ˆUnitï¼‰

- ç›®æ ‡ï¼šéªŒè¯å•ä¸ªå‡½æ•°æˆ–æ¨¡å—çš„çº¯é€»è¾‘ï¼Œè¾“å…¥/è¾“å‡ºå¯ç›´æ¥æ„é€ ã€‚
- ä½ç½®ï¼š`test/unit/<é¢†åŸŸ>/<æ–‡ä»¶>.test.ts`
- æ¡†æ¶ï¼šNode.js `node:test` + `assert/strict`
- æ¨¡æ¿ç‰‡æ®µï¼š
  ```ts
  import { describe, it } from 'node:test';
  import assert from 'node:assert/strict';
  import { å¾…æµ‹å‡½æ•° } from '../../../src/...';

  describe('æ¨¡å—è¯´æ˜', () => {
    it('åº”è¯¥æ»¡è¶³æŸè¡Œä¸º', () => {
      const è¾“å…¥ = ...;
      const ç»“æœ = å¾…æµ‹å‡½æ•°(è¾“å…¥);
      assert.deepEqual(ç»“æœ, æœŸæœ›å€¼);
    });
  });
  ```
- å¸¸è§é™·é˜±ï¼šä¸è¦åœ¨å•å…ƒæµ‹è¯•ä¸­è®¿é—®æ–‡ä»¶ç³»ç»Ÿæˆ–æ‰§è¡Œ CLIï¼›è‹¥éœ€è¦ï¼Œè¯·å‡çº§ä¸ºé›†æˆæˆ– E2Eã€‚

### é›†æˆæµ‹è¯•ï¼ˆIntegrationï¼‰

- ç›®æ ‡ï¼šè¦†ç›–å¤šä¸ªå†…éƒ¨æ¨¡å—åä½œï¼Œå¦‚è¯æ³•â†’è¯­æ³•â†’ç±»å‹æ£€æŸ¥é“¾è·¯ã€‚
- ä½ç½®ï¼š`test/integration/`
- å»ºè®®ï¼šå°è£…å¤ç”¨ `src/` ä¸‹çš„å…¬å…± APIï¼ˆå¦‚ `canonicalize`ã€`parse`ï¼‰ï¼Œé¿å…é‡å¤ç®¡çº¿ä»£ç ã€‚
- è¾“å‡ºï¼šé€šå¸¸è¿”å›è¯Šæ–­ç»“æœæ•°ç»„ã€æ ¸å¿ƒä¸­é—´è¡¨ç¤ºï¼Œéœ€æ–­è¨€ç»“æ„ã€‚
- è°ƒè¯•æŠ€å·§ï¼šåœ¨ `npm run test:integration` æ—¶åŠ  `--inspect` é™„åŠ è°ƒè¯•å™¨ã€‚

### ç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆE2Eï¼‰

- ç›®æ ‡ï¼šæ¨¡æ‹Ÿç”¨æˆ·è·¯å¾„ï¼Œé€šå¸¸é€šè¿‡ CLI æˆ–è„šæœ¬æ‰§è¡Œ Aster ç¼–è¯‘æµç¨‹ã€‚
- ä½ç½®ï¼š`test/e2e/` ä¸ `test/cnl/examples/`ï¼ˆé»„é‡‘æ•°æ®ï¼‰ã€‚
- Golden æµ‹è¯•ï¼šå°†è¾“å‡ºå†™å…¥ `test/e2e/golden/expected/*.json`ï¼Œå¹¶åœ¨ä»£ç ä¸­è°ƒç”¨æ¯”è¾ƒå™¨ã€‚
- æ³¨æ„ï¼šæ–°å¢ Golden æ–‡ä»¶å¿…é¡»åœ¨ PR ä¸­ä¸€åŒæäº¤ï¼Œä¸”ä¿æŒå†…å®¹å¯è¯»ã€æ³¨é‡Šæ˜ç¡®ã€‚

### å›å½’æµ‹è¯•ï¼ˆRegressionï¼‰

- ç›®æ ‡ï¼šé”å®šå·²çŸ¥ç¼ºé™·æ¡ˆä¾‹ï¼Œé˜²æ­¢å†æ¬¡å¤ç°ã€‚
- ä½ç½®ï¼š`test/regression/type-checker-golden.test.ts` ç­‰ã€‚
- TODO ç­–ç•¥ï¼šå½“å®ç°ç¼ºå¤±æ—¶ï¼Œä»¥æ³¨é‡Š `TODO(TypeChecker): ...` å½¢å¼ä¿ç•™ï¼Œå¹¶åœ¨ `.claude/phase5.3-test-failures-analysis.md` æ›´æ–°è¯´æ˜ã€‚
- åœ¨æ¢å¤ TODO å‰ï¼Œéœ€ä¸ä¸» AI ç¡®è®¤ç­–ç•¥ï¼ˆæ˜¯æ›´æ–° expectedã€è¿˜æ˜¯è¡¥å…¨åŠŸèƒ½ï¼‰ã€‚

### å±æ€§æµ‹è¯• / æ¨¡ç³Šæµ‹è¯• / æ€§èƒ½æµ‹è¯•

- `test/property/` ä¾èµ– fast-checkï¼›ç”¨äºå£°æ˜æ€§ä¸å˜é‡ï¼Œç¤ºä¾‹å‚è§ `property/effects.tester.ts`ã€‚
- `test/fuzz/` ä½¿ç”¨ç‹¬ç«‹è„šæœ¬ç”Ÿæˆå¤šç»„è¾“å…¥ï¼Œå…³æ³¨å´©æºƒç‡ä¸è¦†ç›–ç‡ã€‚
- `test/perf/` è®°å½•è¿è¡Œè€—æ—¶ï¼›æäº¤å‰è¯·ä½¿ç”¨åŸºå‡†æ¯”è¾ƒä¿æŒæ³¢åŠ¨ <10%ã€‚

---

## ä¸ºæ–°åŠŸèƒ½æ·»åŠ æµ‹è¯•ï¼šä¸€æ­¥æ­¥æµç¨‹

1. **ç¡®å®šéœ€æ±‚**  
   - ä»ä»»åŠ¡æè¿°æˆ– issue ä¸­æå–åŠŸèƒ½ç‚¹ã€‚  
   - æ ‡è®°æ¶‰åŠæ¨¡å—ï¼ˆè¯­æ³•/ç±»å‹/è¿è¡Œæ—¶ï¼‰ã€‚  
   - è‹¥å­˜åœ¨è®¾è®¡æ–‡æ¡£ï¼Œåœ¨ `.claude/` ç›®å½•æŸ¥æ‰¾å¯¹åº”é˜¶æ®µææ–™ã€‚

2. **é€‰å®šæµ‹è¯•ç±»å‹**  
   - å¯¹ç…§ä¸Šæ–¹å†³ç­–æ ‘ï¼Œå¹¶è¯„ä¼°å¯¹æµ‹è¯•é‡‘å­—å¡”çš„è´¡çŒ®ã€‚  
   - è‹¥é€‰æ‹©ä¸åˆä¸»æµï¼ˆä¾‹å¦‚æ–°å¢ E2E è€Œéå•å…ƒï¼‰ï¼Œéœ€åœ¨ PR æè¿°è¯´æ˜åŸå› ã€‚

3. **å‡†å¤‡è¾“å…¥ä¸æœŸæœ›**  
   - å•å…ƒ/é›†æˆæµ‹è¯•ï¼šç›´æ¥å†™å­—ç¬¦ä¸²æˆ– JSONã€‚  
   - Golden æµ‹è¯•ï¼šåœ¨ `test/cnl/examples/` æ–°å»º `.aster` æˆ– `.json`ï¼Œå†è¿è¡Œå¯¹æ¯”è„šæœ¬ç”Ÿæˆ expectedã€‚  
   - å›å½’æµ‹è¯•ï¼šå¼•ç”¨ `.claude/phase5.3-test-failures-analysis.md` ç­‰æ–‡æ¡£æä¾›çš„å¤±è´¥æ¡ˆä¾‹ã€‚

4. **ç¼–å†™æµ‹è¯•æ–‡ä»¶**  
   - å¤åˆ¶æœ€ç›¸è¿‘çš„æµ‹è¯•æ¨¡æ¿ï¼Œä¿®æ”¹æ¡ˆä¾‹ä¸æ–­è¨€ã€‚  
  - æ‰€æœ‰æ³¨é‡Šã€æè¿°ã€æ–­è¨€æ¶ˆæ¯å¿…é¡»ä½¿ç”¨ä¸­æ–‡ï¼Œæ–¹ä¾¿å›¢é˜Ÿæ²Ÿé€šã€‚  
   - è‹¥éœ€è¦ helperï¼Œè¯·ä¼˜å…ˆå¤ç”¨ `test/helpers/` å†…ç°æœ‰å‡½æ•°ï¼Œé¿å…é‡å¤é€ è½®å­ã€‚

5. **è¿è¡Œé’ˆå¯¹æ€§å‘½ä»¤**  
   - `npm run test:unit` / `npm run test:integration` / `npm run test:e2e` ç­‰ã€‚  
   - æ¨èåŠ ä¸Š `--runInBand` äºéå¹¶è¡Œåœºæ™¯ï¼Œç¡®ä¿è¾“å‡ºé¡ºåºã€‚  
   - å¦‚æ‰§è¡Œ Golden æµ‹è¯•ï¼Œå…ˆè¿è¡Œ `npm run test:golden -- --update` ç”Ÿæˆ expectedï¼Œå†æ‰§è¡Œæ—  `--update` çš„å¯¹æ¯”ã€‚

6. **è°ƒè¯•å¤±è´¥**  
   - ä½¿ç”¨ `LOG_LEVEL=DEBUG` æˆ– `ASTER_DEBUG_TYPES=1` è§‚å¯Ÿå†…éƒ¨æ—¥å¿—ã€‚  
   - ç»“åˆ `node --inspect-brk` å¯¹ CLI è¿›è¡Œæ–­ç‚¹è°ƒè¯•ã€‚  
   - å¦‚æ€€ç–‘è§£æé—®é¢˜ï¼Œå¯è¿è¡Œ `node dist/scripts/typecheck-cli.js <file>` ç›´æ¥æŸ¥çœ‹ AST/è¯Šæ–­ã€‚

7. **è®°å½•ç»“æœ**  
   - åœ¨ PR ä¸­é™„ä¸Šå‘½ä»¤ä¸è¾“å‡ºæ¥è‡ª `docs/testing.md` çš„æ ¼å¼ã€‚  
   - è‹¥éœ€è¦æ›´æ–°æ–‡æ¡£ï¼Œè¯·åŒæ­¥ä¿®æ”¹ `docs/testing.md` æˆ–ç›¸å…³é˜¶æ®µæŠ¥å‘Šã€‚

8. **æäº¤å‰æ£€æŸ¥**  
   - ç¡®ä¿æ–°å¢æ–‡ä»¶å·²åŠ å…¥ gitã€‚  
   - å¯¹æ¯” `npm run lint` æ˜¯å¦é€šè¿‡ï¼ˆè‹¥ä»“åº“æä¾›ï¼‰ã€‚  
   - è¿è¡Œ `npm run test` å…¨é‡éªŒè¯ï¼Œç¡®è®¤æ— å›å½’ã€‚

---

## ä»£ç æ¨¡æ¿ä¸ç¤ºä¾‹

### å•å…ƒæµ‹è¯•æ¨¡æ¿

```ts
import { describe, it } from 'node:test';
import assert from 'node:assert/strict';
import { parseExpression } from '../../../src/parser.js';

describe('è¡¨è¾¾å¼è§£æ', () => {
  it('åº”è¯¥è§£æç®€å•åŠ æ³•', () => {
    const source = '1 + 2';
    const ast = parseExpression(source);
    assert.equal(ast.kind, 'Add');
  });
});
```

### é›†æˆæµ‹è¯•æ¨¡æ¿

```ts
import { describe, it } from 'node:test';
import assert from 'node:assert/strict';
import { canonicalize } from '../../../src/canonicalizer.js';
import { lex } from '../../../src/lexer.js';
import { parse } from '../../../src/parser.js';
import { lowerModule } from '../../../src/lower_to_core.js';
import { typecheckModule } from '../../../src/typecheck.js';

describe('ç®¡çº¿é›†æˆ', () => {
  it('åº”è¯¥ä»æºç ç”Ÿæˆé›¶è¯Šæ–­', () => {
    const source = `
This module is test.examples.hello.

To main, produce Int.
  Return 42.
`;
    const canonical = canonicalize(source);
    const tokens = lex(canonical);
    const ast = parse(tokens);
    const diagnostics = typecheckModule(lowerModule(ast));
    assert.equal(diagnostics.length, 0);
  });
});
```

### é»„é‡‘æµ‹è¯•å·®å¼‚æ¯”è¾ƒ

```ts
import { compareGolden } from '../helpers/golden.js';

it('åº”è¯¥åŒ¹é…é¢„æœŸ JSON', async () => {
  await compareGolden({
    name: 'effects/pii_violation',
    actual: runCliAndCollectJson('test/cnl/examples/pii_violation.aster')
  });
});
```

> æ‰€æœ‰æ¨¡æ¿ä»…ä¾›å‚è€ƒï¼Œå®é™…ä»£ç éœ€æ ¹æ®æ¨¡å—è·¯å¾„è°ƒæ•´ï¼›è¯·ä¿æŒç›¸å¯¹è·¯å¾„æ­£ç¡®ã€‚

---

## è¿è¡Œä¸è°ƒè¯•å‘½ä»¤é€ŸæŸ¥

- å…¨é‡æµ‹è¯•ï¼š`npm run test`
- å•å…ƒæµ‹è¯•ï¼š`npm run test:unit`
- é›†æˆæµ‹è¯•ï¼š`npm run test:integration`
- E2Eï¼ˆå« Goldenï¼‰ï¼š`npm run test:e2e` / `npm run test:golden`
- å›å½’å¥—ä»¶ï¼š`npm run test:regression`
- ä»…æ›´æ–° Goldenï¼š`npm run test:golden -- --update`
- Java ä¾§æµ‹è¯•ï¼š`./gradlew :aster-core:test`
- CLI é›†æˆï¼š`ASTER_COMPILER=java ./gradlew-java25 :aster-lang-cli:run --args 'parse <file>.aster --json'`
- è°ƒè¯• CLIï¼š`LOG_LEVEL=DEBUG node dist/scripts/typecheck-cli.js test/cnl/examples/xxx.aster`

---

## Golden æµ‹è¯•ç»´æŠ¤æµç¨‹

1. åœ¨ `test/cnl/examples/` æ·»åŠ æˆ–æ›´æ–°ç¤ºä¾‹ï¼Œå‘½åè§„åˆ™è§ `test/cnl/examples/README.md`ã€‚  
2. è¿è¡Œ `npm run test:golden -- --update` ç”Ÿæˆæ–°çš„ expected æ–‡ä»¶ã€‚  
3. æ£€æŸ¥ `test/e2e/golden/expected/` ä¸‹çš„ diffï¼Œç¡®è®¤ä»…åŒ…å«é¢„æœŸå˜æ›´ã€‚  
4. åœ¨ PR æè¿°ä¸­é“¾æ¥ç›¸å…³è®¾è®¡æˆ–éœ€æ±‚ï¼Œè¯´æ˜ Golden å˜æ›´åŸå› ã€‚  
5. è‹¥æ›´æ”¹å½±å“åˆ° Phase 5 å†å²ï¼Œè¯·åœ¨ `.claude/phase5.*.md` ä¸­è¿½åŠ è¯´æ˜ï¼ˆéœ€ä¸» AI æŒ‡ç¤ºåæ‰§è¡Œï¼‰ã€‚

---

## å›å½’æµ‹è¯• TODO æ¢å¤æµç¨‹

1. æŸ¥é˜… `.claude/phase5.3-test-failures-analysis.md`ï¼Œæ‰¾åˆ°å¯¹åº” TODO æ ‡è®°ã€‚  
2. å…ˆä¿®å¤æ ¹å› ï¼ˆå®ç°ç¼ºå¤±æˆ–åŸºçº¿è¿‡æ—¶ï¼‰ï¼Œå¹¶å¢åŠ å•å…ƒ/é›†æˆè¦†ç›–ã€‚  
3. åˆ é™¤æµ‹è¯•ä¸­çš„ `TODO(...)` æ³¨é‡Šï¼Œæ¢å¤æ–­è¨€ã€‚  
4. æ›´æ–° expected æ–‡ä»¶ï¼Œç¡®ä¿ `npm run test:regression` å…¨éƒ¨é€šè¿‡ã€‚  
5. åœ¨ PR ä¸­è®°å½•â€œæ¢å¤æŸ TODOâ€ä»¥åŠéªŒè¯ç»“æœï¼Œæ–¹ä¾¿å†å²è¿½æº¯ã€‚  
6. é€šçŸ¥ä¸» AI å®¡é˜…ï¼Œç­‰å¾…ç¡®è®¤ååˆå¹¶ã€‚

---

## æœ€ä½³å®è·µæ¸…å•

- âœ… å…ˆå†™å¤±è´¥çš„æµ‹è¯•å†å®ç°åŠŸèƒ½ï¼Œç¡®ä¿çº¢â†’ç»¿è¿‡ç¨‹å®Œæ•´ã€‚
- âœ… ä¸€æ¬¡ PR åªå…³æ³¨å•ä¸€åŠŸèƒ½æˆ–ç¼ºé™·ï¼Œé¿å…æµ‹è¯•éš¾ä»¥å®šä½ã€‚
- âœ… ä½¿ç”¨ä¸­æ–‡æ–­è¨€ä¿¡æ¯ï¼Œä¾‹å¦‚ `assert.equal(...)` çš„ç¬¬ä¸‰ä¸ªå‚æ•°ã€‚
- âœ… é¿å…ä½¿ç”¨éšæœºæ•°ï¼›å¦‚å¿…é¡»éšæœºï¼Œè¯·è®¾ç½®å›ºå®šç§å­ä¿è¯é‡ç°ã€‚
- âœ… è¿è¡Œå®Œæµ‹è¯•åï¼Œæ›´æ–° `docs/testing.md` çš„ç»Ÿè®¡æˆ–æ‰§è¡Œè®°å½•ï¼ˆéœ€ä¸» AI æŒ‡ç¤ºï¼‰ã€‚
- âœ… åœ¨ `operations-log.md` è®°å½•å…³é”®æµ‹è¯•å‘½ä»¤ä¸ç»“æœã€‚
- ğŸš« ä¸è¦åœ¨æµ‹è¯•ä¸­åšç½‘ç»œè¯·æ±‚æˆ–ä¾èµ–æœª mock çš„å¤–éƒ¨ç³»ç»Ÿã€‚
- ğŸš« ä¸è¦æäº¤å­¤ç«‹çš„ expected æ–‡ä»¶å˜æ›´ï¼Œå¿…é¡»ä¼´éšä»£ç æˆ–æ–‡æ¡£è§£é‡Šã€‚
- ğŸš« ä¸è¦ä¿®æ”¹å®‰å…¨ç›¸å…³é€»è¾‘ä»¥è§„é¿æµ‹è¯•å¤±è´¥ï¼ˆå®‰å…¨ç­–ç•¥ç”±ä¸Šå±‚è´Ÿè´£ï¼‰ã€‚

---

## å¸¸è§é—®é¢˜

**Qï¼šä¸ºä»€ä¹ˆæˆ‘çš„ Golden æµ‹è¯•è¾“å‡ºæ ¼å¼ä¸ä¸€è‡´ï¼Ÿ**  
Aï¼šè¯·ç¡®è®¤å·²è¿è¡Œ `npm run build`ï¼Œä¿è¯ PEG è§£æå™¨ä¸ç±»å‹æ£€æŸ¥å™¨ç‰ˆæœ¬åŒæ­¥ï¼›æ­¤å¤–ï¼Œæ¯”è¾ƒ JSON æ—¶è¯·æ’åºå­—æ®µæˆ–ä½¿ç”¨ helperã€‚

**Qï¼šå›å½’æµ‹è¯•ä¸­ TODO è¦å¦‚ä½•æ ‡è®°ï¼Ÿ**  
Aï¼šä½¿ç”¨ `TODO(TypeChecker): ...` å½¢å¼ï¼Œå¹¶åœ¨ `.claude/phase5.3-test-failures-analysis.md` è¯´æ˜åŸå› ä¸æœŸæœ›æ¢å¤æ¡ä»¶ã€‚

**Qï¼šèƒ½å¦ç›´æ¥åœ¨å›å½’ç”¨ä¾‹é‡Œå†™å®ç°æ¨æ–­é€»è¾‘ï¼Ÿ**  
Aï¼šç¦æ­¢ã€‚æµ‹è¯•å±‚åªéªŒè¯è¡Œä¸ºï¼Œå…·ä½“å®ç°éœ€åœ¨ `src/` æˆ– `packages/` ä¸‹å®Œæˆã€‚

---

## é™„å½•ï¼šå‚è€ƒèµ„æ–™

- `.claude/phase5.*-*.md` â€”â€” Phase 5 å†å²è®°å½•ä¸å†³ç­–æ—¥å¿—ã€‚
- `docs/testing.md` â€”â€” æœ€æ–°æ‰§è¡Œè®°å½•ã€‚
- `test/unit/async/async-discipline.test.ts` â€”â€” å¤æ‚è¯Šæ–­å•å…ƒæµ‹è¯•ç¤ºä¾‹ã€‚
- `test/regression/type-checker-golden.test.ts` â€”â€” å›å½’æµ‹è¯•ç»“æ„ä¸ TODO æ³¨é‡Šç¤ºä¾‹ã€‚
- `test/helpers/golden.ts` â€”â€” é»„é‡‘æµ‹è¯•æ¯”è¾ƒå·¥å…·ã€‚

---

> è‹¥åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­é‡åˆ°é˜»å¡ï¼Œè¯·è®°å½•é—®é¢˜å¹¶é€šçŸ¥ä¸» AI æŒ‡ç¤ºä¸‹ä¸€æ­¥ï¼›æ‰§è¡Œ AI ä¸åšç»ˆå±€åˆ¤æ–­ã€‚
