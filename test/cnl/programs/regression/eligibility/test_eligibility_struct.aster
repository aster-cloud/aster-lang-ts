Module test.eligibility.struct.

Define Patient has patientId, age, hasInsurance, insuranceType, chronicConditions.

Define Service has serviceCode, serviceName, basePrice, requiresPreAuth.

Define EligibilityCheck has eligible, reason, coveragePercent, estimatedCost, requiresPreAuth.

Rule calculatePatientCost given basePrice, coveragePercent, produce:
  Let patientPercent be 100 minus coveragePercent.
  Let patientCost be basePrice times patientPercent.
  Return patientCost.

Rule checkServiceEligibility given patient, service, produce:
  Return EligibilityCheck with eligible = true, reason = "Has insurance", coveragePercent = 80, estimatedCost = calculatePatientCost(service.basePrice, 80), requiresPreAuth = service.requiresPreAuth.
